<html>
  <head>
    <script>
      onload = function() {
        console.warn("page loaded")

        var canvases = document.getElementsByTagName("canvas")
        var images = []
        for (let can = 0; can < canvases.length; can++) {
          var canvas = canvases[can]

          // var newCan = document.createElement("canvas")
          // newCan.width = canvas.width * 2
          // newCan.height = canvas.height * 2

          // canvas = newCan

          c = canvas.getContext("2d")

          var amount = 32
          var total = Math.pow(amount, 2)
          var width = canvas.width / amount
          var height = canvas.height / amount

          var x = 0
          var y = 0

          c.beginPath()

          c.lineWidth = 1
          c.strokeStyle = "white"

          for (let i = 0; i < total; i++) {
            c.moveTo(x, y)
            c.lineTo(x + width, y)
            c.lineTo(x + width, y + height)
            c.lineTo(x, y + height)
            c.lineTo(x, y)

            x += width

            if (x >= canvas.width) {
              x = 0
              y += height
            }
          }
          c.stroke()
          c.closePath()

          c.beginPath()
          c.moveTo(0, 0)
          c.lineTo(canvas.width, 0)
          c.lineTo(canvas.width, canvas.height)
          c.lineTo(0, canvas.height)
          c.lineTo(0, 0)
          c.lineWidth *= 2

          c.stroke()
          c.closePath()

          images.push(canvas.toDataURL("image/png"))
        }

        var body = document.getElementsByTagName("body")[0]
        while (body.childNodes.length) body.removeChild(body.childNodes[0])

        let i = 0
        function loadImage(i) {
          var img = new Image()
          img.src = images[i]

          img.onload = function() {
            console.log(img)
            body.appendChild(img)
            if (i < images.length - 1) loadImage(++i)
          }
        }

        loadImage(0)
      }
    </script>
    <style>
      body {
        background-color: black;
      }
      canvas {
        background-color: black;
      }

      img {
        margin: 20px;
      }
    </style>
  </head>
  <body>
    <canvas width="294" height="971"></canvas>
    <canvas width="297" height="974"></canvas>
    <canvas width="287" height="940"></canvas>
  </body>
  <html></html>
</html>
